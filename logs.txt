Following LSP daemon log (Ctrl+C to stop)...
────────────────────────────────────────────────────────────
[21:38:15.580] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"424/431","percentage":98}}}
[21:38:15.580] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"425/431","percentage":98}}}
[21:38:15.580] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"425/431: /Users/leonidbugaev/conductor/repo/probe/paris/.claude","percentage":98}}}
[21:38:15.580] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"425/431: /Users/leonidbugaev/conductor/repo/probe/paris/mcp","percentage":98}}}
[21:38:15.580] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"425/431: /Users/leonidbugaev/conductor/repo/probe/paris/docs","percentage":98}}}
[21:38:15.580] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"425/431: /Users/leonidbugaev/conductor/repo/probe/paris/.cargo","percentage":98}}}
[21:38:15.580] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"425/431: /Users/leonidbugaev/conductor/repo/probe/paris/.prompts","percentage":98}}}
[21:38:15.580] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"425/431: /Users/leonidbugaev/conductor/repo/probe/paris/test-probe-implementation","percentage":98}}}
[21:38:15.580] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"425/431: /Users/leonidbugaev/conductor/repo/probe/paris/examples","percentage":98}}}
[21:38:15.580] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"426/431","percentage":98}}}
[21:38:15.580] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"426/431: /Users/leonidbugaev/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/rustls-0.23.31","percentage":98}}}
[21:38:15.580] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"426/431: /Users/leonidbugaev/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/rustls-0.23.31","percentage":98}}}
[21:38:15.580] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"426/431: /Users/leonidbugaev/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/rustls-0.23.31/src","percentage":98}}}
[21:38:15.581] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"427/431","percentage":99}}}
[21:38:15.581] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"428/431","percentage":99}}}
[21:38:15.581] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"429/431","percentage":99}}}
[21:38:15.581] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"429/431: /Users/leonidbugaev/conductor/repo/probe/paris/scripts","percentage":99}}}
[21:38:15.581] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"429/431: /Users/leonidbugaev/conductor/repo/probe/paris/.github","percentage":99}}}
[21:38:15.581] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"429/431: /Users/leonidbugaev/conductor/repo/probe/paris/test_project","percentage":99}}}
[21:38:15.581] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"429/431: /Users/leonidbugaev/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/test","percentage":99}}}
[21:38:15.581] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"429/431: /Users/leonidbugaev/conductor/repo/probe/paris/site","percentage":99}}}
[21:38:15.581] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"429/431: /Users/leonidbugaev/conductor/repo/probe/paris/simple-test","percentage":99}}}
[21:38:15.581] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"429/431: /Users/leonidbugaev/conductor/repo/probe/paris/benches","percentage":99}}}
[21:38:15.581] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"429/431: /Users/leonidbugaev/conductor/repo/probe/paris/mcp-agent","percentage":99}}}
[21:38:15.581] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"429/431: /Users/leonidbugaev/conductor/repo/probe/paris/npm","percentage":99}}}
[21:38:15.582] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"429/431: /Users/leonidbugaev/conductor/repo/probe/paris/src","percentage":99}}}
[21:38:15.582] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"429/431: /Users/leonidbugaev/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/coretests","percentage":99}}}
[21:38:15.582] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"430/431","percentage":99}}}
[21:38:15.582] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"430/431: /Users/leonidbugaev/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/backtrace","percentage":99}}}
[21:38:15.582] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"430/431: /Users/leonidbugaev/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/std","percentage":99}}}
[21:38:15.582] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"430/431: /Users/leonidbugaev/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/rustc-std-workspace-core","percentage":99}}}
[21:38:15.582] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"430/431: /Users/leonidbugaev/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/proc_macro","percentage":99}}}
[21:38:15.582] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"430/431: /Users/leonidbugaev/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/rustc-std-workspace-alloc","percentage":99}}}
[21:38:15.583] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"430/431: /Users/leonidbugaev/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/portable-simd","percentage":99}}}
[21:38:15.583] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"430/431: /Users/leonidbugaev/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/panic_unwind","percentage":99}}}
[21:38:15.583] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"430/431: /Users/leonidbugaev/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/unwind","percentage":99}}}
[21:38:15.583] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"430/431: /Users/leonidbugaev/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/rtstartup","percentage":99}}}
[21:38:15.583] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"430/431: /Users/leonidbugaev/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/stdarch","percentage":99}}}
[21:38:15.583] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"430/431: /Users/leonidbugaev/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/rustc-std-workspace-std","percentage":99}}}
[21:38:15.583] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"430/431: /Users/leonidbugaev/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/alloctests","percentage":99}}}
[21:38:15.583] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"430/431: /Users/leonidbugaev/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/profiler_builtins","percentage":99}}}
[21:38:15.583] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"430/431: /Users/leonidbugaev/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/panic_abort","percentage":99}}}
[21:38:15.583] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"430/431: /Users/leonidbugaev/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/windows_targets","percentage":99}}}
[21:38:15.584] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"430/431: /Users/leonidbugaev/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/sysroot","percentage":99}}}
[21:38:15.584] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"cancellable":false,"kind":"report","message":"431/431","percentage":100}}}
[21:38:15.584] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Roots Scanned","value":{"kind":"end","message":"431/431"}}}
[21:38:15.647] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Fetching","value":{"cancellable":false,"kind":"report","message":"Querying project metadata"}}}
[21:38:15.649] <<< FROM LSP: {"jsonrpc":"2.0","method":"$/progress","params":{"token":"rustAnalyzer/Fetching","value":{"kind":"end"}}}
[21:38:15.652] <<< FROM LSP: {"id":4,"jsonrpc":"2.0","method":"window/workDoneProgress/create","params":{"token":"rustAnalyzer/Fetching"}}
[21:38:15.652] >>> TO LSP: {"jsonrpc":"2.0","method":"textDocument/didClose","params":{"textDocument":{"uri":"file:///Users/leonidbugaev/conductor/repo/probe/paris/lsp-test-project/src/main.rs"}}}
[21:39:10.283] [DAEMON] Received request: Discriminant(8)
[21:39:10.283] [SERVER_MANAGER] get_stats called, 1 servers in map
[21:39:10.283] [SERVER_MANAGER] Processing Rust server
[21:39:10.284] [DAEMON] Received request: Discriminant(0)
[21:39:10.300] [DAEMON] Received request: Discriminant(3)
[21:39:10.300] [DAEMON] handle_call_hierarchy_inner called for "lsp-test-project/src/main.rs" at 65:3
[21:39:10.300] [DAEMON] Created/got server instance for Rust
[21:39:10.301] >>> TO LSP: {
  "jsonrpc": "2.0",
  "method": "textDocument/didOpen",
  "params": {
    "textDocument": {
      "languageId": "rust",
      "text": "use std::collections::HashMap;\n\nfn main() {\n    println!(\"LSP Test Project\");\n    \n    let data = setup_data();\n    process_data(&data);\n    \n    let result = calculate_result(10, 20);\n    display_result(result);\n    \n    let numbers = vec![1, 2, 3, 4, 5];\n    let processed = process_numbers(numbers);\n    println!(\"Processed numbers: {:?}\", processed);\n}\n\nfn setup_data() -> HashMap<String, i32> {\n    let mut map = HashMap::new();\n    map.insert(\"first\".to_string(), 1);\n    map.insert(\"second\".to_string(), 2);\n    map.insert(\"third\".to_string(), 3);\n    \n    // This function calls helper functions\n    let additional_data = create_additional_data();\n    map.extend(additional_data);\n    \n    map\n}\n\nfn create_additional_data() -> HashMap<String, i32> {\n    let mut additional = HashMap::new();\n    additional.insert(\"fourth\".to_string(), 4);\n    additional.insert(\"fifth\".to_string(), 5);\n    additional\n}\n\nfn process_data(data: &HashMap<String, i32>) {\n    println!(\"Processing data with {} entries\", data.len());\n    \n    for (key, value) in data {\n        validate_entry(key, *value);\n    }\n    \n    let sum = calculate_sum(data);\n    println!(\"Total sum: {}\", sum);\n}\n\nfn validate_entry(key: &str, value: i32) {\n    if value < 0 {\n        println!(\"Warning: negative value for key '{}'\", key);\n    }\n    \n    // Call utility function\n    let formatted = format_entry(key, value);\n    println!(\"Formatted: {}\", formatted);\n}\n\nfn format_entry(key: &str, value: i32) -> String {\n    format!(\"{}={}\", key, value)\n}\n\nfn calculate_sum(data: &HashMap<String, i32>) -> i32 {\n    data.values().sum()\n}\n\nfn calculate_result(a: i32, b: i32) -> i32 {\n    let intermediate = perform_calculation(a, b);\n    apply_modifier(intermediate)\n}\n\nfn perform_calculation(x: i32, y: i32) -> i32 {\n    x + y + get_bonus()\n}\n\nfn get_bonus() -> i32 {\n    42\n}\n\nfn apply_modifier(value: i32) -> i32 {\n    value * 2\n}\n\nfn display_result(result: i32) {\n    println!(\"Final result: {}\", result);\n    \n    if result > 100 {\n        print_large_result(result);\n    } else {\n        print_small_result(result);\n    }\n}\n\nfn print_large_result(value: i32) {\n    println!(\"That's a large result: {}\", value);\n}\n\nfn print_small_result(value: i32) {\n    println!(\"That's a small result: {}\", value);\n}\n\nfn process_numbers(numbers: Vec<i32>) -> Vec<i32> {\n    numbers.into_iter()\n        .map(|n| transform_number(n))\n        .filter(|&n| filter_number(n))\n        .collect()\n}\n\nfn transform_number(n: i32) -> i32 {\n    n * 3 + 1\n}\n\nfn filter_number(n: i32) -> bool {\n    n % 2 == 0\n}\n\n// Additional utility functions that create a complex call graph\npub fn public_api_function(input: &str) -> String {\n    let processed = internal_processor(input);\n    finalize_output(processed)\n}\n\nfn internal_processor(input: &str) -> String {\n    let step1 = preprocessing_step(input);\n    let step2 = main_processing_step(&step1);\n    postprocessing_step(step2)\n}\n\nfn preprocessing_step(input: &str) -> String {\n    format!(\"preprocessed_{}\", input)\n}\n\nfn main_processing_step(input: &str) -> String {\n    let helper_result = processing_helper(input);\n    format!(\"main_processed_{}\", helper_result)\n}\n\nfn processing_helper(input: &str) -> String {\n    format!(\"helper_{}\", input)\n}\n\nfn postprocessing_step(input: String) -> String {\n    format!(\"postprocessed_{}\", input)\n}\n\nfn finalize_output(input: String) -> String {\n    format!(\"final_{}\", input)\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_calculate_result() {\n        let result = calculate_result(5, 10);\n        assert_eq!(result, 114); // (5 + 10 + 42) * 2 = 114\n    }\n\n    #[test]\n    fn test_public_api_function() {\n        let result = public_api_function(\"test\");\n        assert_eq!(result, \"final_postprocessed_main_processed_helper_preprocessed_test\");\n    }\n\n    #[test]\n    fn test_process_numbers() {\n        let numbers = vec![1, 2, 3, 4];\n        let result = process_numbers(numbers);\n        // Transform: 1*3+1=4, 2*3+1=7, 3*3+1=10, 4*3+1=13\n        // Filter evens: 4, 10 (7 and 13 are odd)\n        assert_eq!(result, vec![4, 10]);\n    }\n}\n",
      "uri": "file:///Users/leonidbugaev/conductor/repo/probe/paris/lsp-test-project/src/main.rs",
      "version": 1
    }
  }
}
[21:39:12.306] >>> TO LSP: {
  "id": 5,
  "jsonrpc": "2.0",
  "method": "textDocument/prepareCallHierarchy",
  "params": {
    "position": {
      "character": 3,
      "line": 65
    },
    "textDocument": {
      "uri": "file:///Users/leonidbugaev/conductor/repo/probe/paris/lsp-test-project/src/main.rs"
    }
  }
}
[21:39:12.307] <<< FROM LSP: {
  "jsonrpc": "2.0",
  "method": "$/progress",
  "params": {
    "token": "rustAnalyzer/Fetching",
    "value": {
      "cancellable": false,
      "kind": "begin",
      "title": "Fetching"
    }
  }
}
[21:39:12.307] <<< FROM LSP: {
  "jsonrpc": "2.0",
  "method": "$/progress",
  "params": {
    "token": "rustAnalyzer/Fetching",
    "value": {
      "cancellable": false,
      "kind": "report",
      "message": "Discovering sysroot"
    }
  }
}
[21:39:12.307] <<< FROM LSP: {
  "id": 5,
  "jsonrpc": "2.0",
  "method": "window/workDoneProgress/create",
  "params": {
    "token": "rustAnalyzer/cachePriming"
  }
}
[21:39:12.308] >>> TO LSP: {
  "jsonrpc": "2.0",
  "method": "textDocument/didClose",
  "params": {
    "textDocument": {
      "uri": "file:///Users/leonidbugaev/conductor/repo/probe/paris/lsp-test-project/src/main.rs"
    }
  }
}
